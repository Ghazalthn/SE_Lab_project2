# گزارش پروژه‌ی دوم درس آز مهندسی نرم‌افزار
###گروه ۸ 

## مرحله‌ی اول و دوم
تغییرات زیر در راستای اضافه شدن پیام‌رسانی از طریق تلگرام در پروژه اعمال شدند:


<table dir='rtl'>
<tbody>
<tr>
<td width="64">
<p><strong>ردیف</strong></p>
</td>
<td width="198">
<p><strong>محل اعمال تغییرات (کلاس/واسط)</strong></p>
</td>
<td width="141">
<p><strong>عنوان تغییر</strong></p>
</td>
<td width="292">
<p><strong>شرحی کوتاه از تغییر</strong></p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>1</strong></p>
</td>
<td width="198">
<p>TelegramMessage</p>
</td>
<td width="141">
<p>
افزودن کلاس
</p>
</td>
<td width="292">
<p>
افزودن این کلاس با دو متغیر شماره تماس مبدا و مقصد
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>2</strong></p>
</td>
<td width="198">
<p>TelegramMessage</p>
</td>
<td width="141">
<p>
افزودن تابع
</p>
</td>
<td width="292">
<p>
اضافه کردن تابع getSourcePhoneNumber به این کلاس
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>3</strong></p>
</td>
<td width="198">
<p>TelegramMessage</p>
</td>
<td width="141">
<p>
افزودن تابع
</p>
</td>
<td width="292">
<p>
اضافه کردن تابع setSourcePhoneNumber به این کلاس
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>4</strong></p>
</td>
<td width="198">
<p>TelegramMessage</p>
</td>
<td width="141">
<p>
افزودن تابع
</p>
</td>
<td width="292">
<p>
اضافه کردن تابع getTargetPhoneNumber به این کلاس
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>5</strong></p>
</td>
<td width="198">
<p>TelegramMessage</p>
</td>
<td width="141">
<p>
افزودن تابع
</p>
</td>
<td width="292">
<p>
اضافه کردن تابع setTargetPhoneNumber به این کلاس
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>6</strong></p>
</td>
<td width="198">
<p>MessageService</p>
</td>
<td width="141">
<p>
افزودن تابع
</p>
</td>
<td width="292">
<p>
اضافه کردن تابع sendTelegramMessage به این کلاس
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>7</strong></p>
</td>
<td width="198">
<p>EmailMessageService</p>
</td>
<td width="141">
<p>
افزودن تابع
</p>
</td>
<td width="292">
<p>
اضافه کردن تابع sendTelegramMessage به این کلاس
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>8</strong></p>
</td>
<td width="198">
<p>SmsMessageService</p>
</td>
<td width="141">
<p>
افزودن تابع
</p>
</td>
<td width="292">
<p>
اضافه کردن تابع sendTelegramMessage به این کلاس
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>9</strong></p>
</td>
<td width="198">
<p>TelegramMessageService</p>
</td>
<td width="141">
<p>
افزودن کلاس
</p>
</td>
<td width="292">
<p>
افزودن این کلاس به پروژه
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>10</strong></p>
</td>
<td width="198">
<p>TelegramMessageService</p>
</td>
<td width="141">
<p>
افزودن تابع
</p>
</td>
<td width="292">
<p>
اضافه کردن تابع sendTelegramMessage به این کلاس
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>11</strong></p>
</td>
<td width="198">
<p>TelegramMessageService</p>
</td>
<td width="141">
<p>
افزودن تابع
</p>
</td>
<td width="292">
<p>
اضافه کردن تابع sendEmailMessage به این کلاس
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>12</strong></p>
</td>
<td width="198">
<p>TelegramMessageService</p>
</td>
<td width="141">
<p>
افزودن تابع
</p>
</td>
<td width="292">
<p>
اضافه کردن تابع sendSmsMessage به این کلاس
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>13</strong></p>
</td>
<td width="198">
<p>TelegramMessageService</p>
</td>
<td width="141">
<p>
افزودن تابع
</p>
</td>
<td width="292">
<p>
اضافه کردن تابع validatePhoneNumber به این کلاس
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>14</strong></p>
</td>
<td width="198">
<p>Main</p>
</td>
<td width="141">
<p>
تغییر تابع
</p>
</td>
<td width="292">
<p>
افزودن خطی جهت نشان دادن گزینه‌ی ارسال پیام با تلگرام (عدد ۳)
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>15</strong></p>
</td>
<td width="198">
<p>Main</p>
</td>
<td width="141">
<p>
تغییر تابع
</p>
</td>
<td width="292">
<p>
افزودن case 3 به switch مربوط به نوع پیام ارسالی
</p>
</td>
</tr>

<tr>
<td width="64">
<p><strong>16</strong></p>
</td>
<td width="198">
<p>Main</p>
</td>
<td width="141">
<p>
تغییر تابع
</p>
</td>
<td width="292">
<p>
افزودن حالتی که پیام ارسالی از جنس پیام تلگرامی باشد به if elseهای انتهای کلاس
</p>
</td>
</tr>

</tbody>
</table>


## مرحله سوم: بررسی تطابق با اصول SOLID

<table dir='rtl'>
  <tbody>
    <tr>
      <td rowspan="2" width="240"><p>اصل 1</p><p>Single Responsibility</p></td>
      <td width="95"><p><strong>موارد تحقق</strong></p></td>
      <td width="454"><p>هر کلاس به ارسال یک نوع از پیام‌ها می‌پردازد. من جمله این انواع می‌توان به ایمیل، پیامک و پیام تلگرامی اشاره کرد.
    <tr>
      <td><p><strong>موارد نقض</strong></p></td>
      <td><p>کلاس main همه کار می‌کند و وظایف زیادی دارد.
به‌علاوه، هر کلاس، بخش ولیدیشن را نیز هندل می‌کند. به همین دلیل بیش از یک دلیل برای تغییر آن وجود دارد. (که برخلاف اصول SRP می‌باشد.)
      </p></td>
    </tr>
    <tr>
      <td rowspan="2"><p>اصل 2</p><p>Open-Close Principle (OCP)</p></td>
      <td><p><strong>موارد تحقق</strong></p></td>
      <td>
<p>به طور کلی این اصل در اغلب کلاس‌ها رعایت نشده است. تنها تایع main اندکی قایل بهبود است.</p>
    </tr>
    <tr>
      <td><p><strong>موارد نقض</strong></p></td>
      <td><p> افزودن نوعی جدید از پیام بدون مودیفای کردن main ممکن نیست. همچنین سرویس message نیز در این راستا، نیازمند افزوده شدن متودی جدید است.</p></td>
    </tr>
    <tr>
      <td rowspan="2"><p>اصل 3</p><p>Liskov Substitution Principle</p></td>
      <td><p><strong>موارد تحقق</strong></p></td>
      <td>
<p>همه‌ی سرویس‌ها به درستی  و مطابق LSP به پیاده‌سازی MessageService پرداخته‌اند.</p>
    </tr>
    <tr>
      <td><p><strong>موارد نقض</strong></p></td>
      <td><p>سرویس MessageService، رفتارهای اضافی به فرزندان خود تحمیل کرده در حالیکه آن‌ها به این رفتار‌ها نیازی ندارند.</p></td>
    </tr>
    <tr>
      <td rowspan="2"><p>اصل 4</p><p>Interface Segregation Principle</p></td>
      <td><p><strong>موارد تحقق</strong></p></td>
      <td>
<p>سرویس MessageSerivce از متودهای مجزا برای سرویس‌های مختلف استفاده کرده است.</p>
    </tr>
    <tr>
      <td><p><strong>موارد نقض</strong></p></td>
      <td><p>سرویس MessageService به تحمیل متودهای اضافی به فرزند‌های خود پرداخته است. (مثلا سرویس EmailMessageService باید متدهای پیامکی را پیاده‌سازی کند.)</p></td>
    </tr>
    <tr>
      <td rowspan="2"><p>اصل 5</p><p>Dependency Inversion Principle</p></td>
      <td><p><strong>موارد تحقق</strong></p></td>
      <td><p>وابستگی سطح بالای Main به MessageService بجای وابستگی به کلاس‌های خاص‌منظوره‌تر در راستای این مورد صورت گرفته است. </p></td>
    </tr>
    <tr>
      <td><p><strong>موارد نقض</strong></p></td>
      <td><p>کلاس Main مستقیما به کلاس‌ها وابسته است. این درحالی‌ست که این وابستگی باید به ابسترکت‌ها باشد. </p></td>
    </tr>
  </tbody>
</table>


## مرحله چهارم: موارد نقص و ارائه‌ی راه‌کار پیشنهادی 

<table dir='rtl'>
<tbody>
<tr>
<td width="168">
<p><strong>اصل مربوطه (از اصول </strong><strong>SOLID</strong><strong>)</strong></p>
</td>
<td width="246">
<p><strong>علت نقض</strong></p>
</td>
<td width="284">
<p><strong>راه حل پیشنهادی</strong></p>
</td>
</tr>
<tr>
<td width="168">
<p>Single Responsibility Principle</p>
</td>
<td width="246">
<p>
سرویس MessageService    کارهای زیادی می‌کند (من جمله ولیدیت و ارسال)
همچنین کلاس main هم حجم‌کاری بسیاری دارد. (من جمله ساختن آبجکت‌ها، گرفتن ورودی و...)
</p>
</td>
<td width="284">
<p>
  - رابط MessageService را بازسازی کنیم تا به جای داشتن متدهای مجزا برای هر نوع پیام، فقط یک متد عمومی به نام sendMessage داشته باشد که به هر نوع پیامی که از Message ارث‌بری کرده باشد، پاسخ دهد. بدین صورت هر کلاس سرویس فقط مسئول ارسال یک نوع خاص از پیام می شود.
  - در Main.java، ورودی‌های کاربر را مدیریت کنیم اما منطق ارسال پیام را به سرویس‌های اختصاصی (مانند EmailMessageService) واگذار می‌کنیم.
</p>
</td>
</tr>
<tr>
<td width="168">
<p>Open-Close Principle</p>
</td>
<td width="246">
<p>
برای افزودن نوعی جدید از پیام لازم است:
<br>- ابتدا MessageService  را مودیفای کنیم
<br>- سپس سوییچ کیس‌های موجود در Main را به‌روز‌رسانی کنیم.</p>
</td>
<td width="284">
<p>
- بازسازی MessageService به گونه‌ای که فقط یک متد عمومی (sendMessage) داشته باشد، این امکان فراهم میوشود که هر نوع پیام جدیدی را بدون تغییر در کد موجود، اضافه کنیم.
</p>
</td>
</tr>
<tr>
<td width="168">
<p>Liskov Substitution Principle & Interface Segregation Principle</p>
</td>
<td width="246">
<p>
سرویس MessageService  کلاس‌ها را به پیاده‌سازی متد‌هایی می‌کند که به آنان نیازی ندارند.
<br>- فرضا EmailMessageService  باید متد sendSmsMessage() را پیاده‌سازی کند که بدیهتا مورد نیازش نمی‌باشد.</p>
</td>
<td width="284">
<p>
- رابط MessageService را به گونه‌ای بازسازی کنیم که فقط یک متد عمومی به نام sendMessage داشته باشد. این متد، هر پیام ورودی که از کلاس Message ارث‌بری کرده باشد را پردازش کند.
</p>
</td>
</tr>
  
<tr>
<td width="168">
<p>Interface Segregation Principle</p>
</td>
<td width="246">
<p>
رابط MessageService متدهای زیادی دارد (مانند sendSmsMessage, sendEmailMessage, sendTelegramMessage)، که این به کلاس‌ها فشار می‌آورد که متدهایی را پیاده‌سازی کنند که به آن‌ها نیاز ندارند.
</p>
</td>
<td width="284">
<p>
- با بازسازی رابط MessageService به گونه‌ای که فقط یک متد sendMessage داشته باشد، از بروز این مشکل جلوگیری میشود.
</p>
</td>
</tr>

  
<tr>
<td width="168">
<p>Dependency Inversion Principle</p>
</td>
<td width="246">
<p>
متد main به به پیاده‌سازی concrete سرویس MessageService وابسته است.
<br>- این مورد باعث وابستگی بیش از حد و پیچیدگی در توسعه و تست می‌شود.
</p>
</td>
<td width="284">
<p>
  - در Main.java، ما به جای وابستگی به کلاس‌های خاص، به رابط MessageService وابسته شویم که این باعث میشود که Main.java به جزئیات پیاده‌سازی سرویس‌ها وابسته نباشد.
</p>
</td>
</tr>
</tbody>
</table>


## سوالات نهایی

<table dir='rtl'>
  <tbody>
    <tr>
      <td><p><strong>سوال اول</strong></p></td>
      <td><p>اگر اصول شی گرایی از ابتدا برقرار بود و شما سرویس جدید را به پروژه اضافه می‌کردید، چند مورد از تغییرات ثبت شده در جدول مرحله دوم حذف می‌شد؟ و در نهایت با چند تغییر در سطح کد، این سرویس اضافه می‌شد؟ (عدد آن را حتما اعلام کنید)</p></td>
    </tr>
    <tr>
      <td><p><strong>پاسخ</strong></p></td>
      <td>
        <p>
	در صورت برقرار بودن اصول SOLID در کدبیس، ۶ تغییر زیر از جدول مربوط حذف می‌شدند:

- 16
- 11
- 12
- 7
- 8
- 6

همچنین در شرایط مذکور و پایداری اصول، تنها با صورت دادن چهار تغییر اصلی شامل (ساختن سرویس جدید)، (ساختن کیس جدید در سوئیچ کیس)، (ساختن تایپ پیامی جدید) و در انتها (تغییر متن UI و پیام مربوطه) می‌توان به افزودن سرویس جدید پرداخت.
		<p/>
      </td>
    </tr>
    <tr>
      <td><p><strong>سوال دوم</strong></p></td>
      <td><p>با توجه به آنچه که انجام دادید، در دو خط توضیح دهید که رعایت اصول شی گرایی، چه مزایایی را برای پروژه شما فراهم می‌کند؟</p></td>
    </tr>
    <tr>
      <td><p><strong>پاسخ</strong></p></td>
      <td>
        <p>
		پیروی از اصول شی‌گرایی موجب بهبود خوانایی، قابلیت نگهداری و بهبود‌پذیری کدها می‌شود. علاوه بر این، امکان افزودن قابلیت‌های جدید بدون دستکاری در کدهای قبلی فراهم می‌آید و ریسک بروز اشکالات جدید به‌طور قابل توجهی کاهش می‌یابد.
		<p/>
      </td>
    </tr>
  </tbody>
</table>
